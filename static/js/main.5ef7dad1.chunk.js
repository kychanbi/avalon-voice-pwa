(this["webpackJsonpavalon-pwa"]=this["webpackJsonpavalon-pwa"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),i=n.n(c),s=(n(91),n(92),n(17)),o=n(134),l=n(78),u=n(144),b=n(150),j=n(135),d=n(76),g=n.n(d),h=n(77),O=n.n(h),v=n(27),m=n(14),P=n(147),p=n(137),x=n(138),f=n(104),C=n(139),y=n(151),S=n(145),M=n(152),k=n(140),L=n(141),w=n(149),N=n(106),A=n(153),R=n(73),B=n.n(R),F={totalNumberOfPlayers:{5:{good:3,evil:2},6:{good:4,evil:2},7:{good:4,evil:3},8:{good:5,evil:3},9:{good:6,evil:3},10:{good:6,evil:4}},label:{isPercivalPresent:"\u6d3e\u897f\u7dad\u723e",isMordredPresent:"\u83ab\u5fb7\u96f7\u5fb7",isMorganaPresent:"\u83ab\u7518\u5a1c",isOberonPresent:"\u5967\u67cf\u502b",isLancelotPresent:"\u862d\u65af\u6d1b\u7279",isClericPresent:"Cleric",isBlindHunterPresent:"BlindHunter",isMutineerPresent:"Mutineer",isArthurPresent:"Arthur",isChangelingPresent:"Changeling",isScionPresent:"Scion",isMorganLeFayPresent:"Morgan Le Fay",isNewbieMode:"\u65b0\u624b\u6a21\u5f0f",useLancelotAlternativeRules:"\u4f7f\u7528\u862d\u65af\u6d1b\u7279\u76f8\u8a8d\u898f\u5247"},langs:["zh-HK","yue_HK_#Hant"],presets:{"preset-6":{totalNumberOfPlayer:"6",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!1,isLancelotPresent:!0,useLancelotAlternativeRules:!1,desc:"\u7d93\u5178\u516d\u4eba"},"preset-7":{totalNumberOfPlayer:"7",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!0,isLancelotPresent:!0,useLancelotAlternativeRules:!1,desc:"\u7d93\u5178\u4e03\u4eba"},"preset-8":{totalNumberOfPlayer:"8",isPercivalPresent:!0,isMordredPresent:!0,isMorganaPresent:!0,isOberonPresent:!1,isLancelotPresent:!0,useLancelotAlternativeRules:!1,desc:"\u7d93\u5178\u516b\u4eba"}},theme:{light:{palette:{type:"light"}},dark:{palette:{type:"dark"}}}};Object.freeze(F);var D,q=n(4);!function(e){e.Avalon="avalon",e.Quest="quest"}(D||(D={}));var H={avalonCharacterSetting:{totalNumberOfPlayer:"5",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!1,isLancelotPresent:!1,useLancelotAlternativeRules:!1},speakingRate:.8,countingRate:.9,isDarkMode:!1,isNewbieMode:!1,gameMode:D.Avalon,questCharacterSetting:{isBlindHunterPresent:!0,isClericPresent:!0,isMutineerPresent:!1,isArthurPresent:!1,isChangelingPresent:!1,isMorganLeFayPresent:!0,isScionPresent:!1,isLancelotPresent:!1}};function W(e){return{numberOfGood:F.totalNumberOfPlayers[e].good,numberOfEvil:F.totalNumberOfPlayers[e].evil}}var E=r.a.createContext({allSetting:H,editSetting:function(){},editAllCharacterSettings:function(){}}),T=function(e){var t=e.children,n=Object(a.useState)(H),r=Object(s.a)(n,2),c=r[0],i=r[1];return Object(q.jsx)(E.Provider,{value:{allSetting:c,editSetting:function(e,t){if(e.includes(".")){var n=e.split("."),a=Object(s.a)(n,2),r=a[0],o=a[1],l=c[r];l=Object(m.a)(Object(m.a)({},l),{},Object(v.a)({},o,t)),i(Object(m.a)(Object(m.a)({},c),{},Object(v.a)({},r,l)))}else{var u=Object(m.a)(Object(m.a)({},c),{},Object(v.a)({},e,t));i(u)}},editAllCharacterSettings:function(e){var t=c.avalonCharacterSetting;t=Object(m.a)(Object(m.a)({},t),e),i(Object(m.a)(Object(m.a)({},c),{},{avalonCharacterSetting:t}))}},children:t})},I=n(146),V=function(e){var t=e.children,n=e.value,a=e.currentTab;return Object(q.jsx)("div",{role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n),children:n===a&&Object(q.jsx)(I.a,{sx:{p:0},children:t})})},z=Object(o.a)((function(e){return{settingTab:{backgroundColor:e.palette.background.paper,width:"70%",height:"80%",padding:"3em 1.5em 5em",minWidth:320},selectFormControl:{margin:"".concat(e.spacing(1),"px 0"),minWidth:"10em"},sliderWrap:{maxWidth:"55vw"},closeBtn:{position:"absolute",top:e.spacing(3),right:e.spacing(3),cursor:"pointer",zIndex:10},presetBtn:{margin:"".concat(e.spacing(2),"px 0")}}})),K=F.label,Q=function(e){var t=e.closeDialog,n=z(),r=Object(a.useContext)(E),c=r.allSetting,i=r.editSetting,o=r.editAllCharacterSettings,l=c.avalonCharacterSetting,u=c.questCharacterSetting,b=Object(a.useState)(null!==c&&void 0!==c?c:H),d=Object(s.a)(b,2),g=d[0],h=d[1],O=function(e){var t=e.target.name,n=e.target.value,a=e.target.checked,r=void 0===a?n:a;h(Object(m.a)(Object(m.a)({},g),{},Object(v.a)({},t,r))),i(t,r)},R=function(e){return function(t,n){Array.isArray(n)||(h(Object(m.a)(Object(m.a)({},g),{},Object(v.a)({},e,n))),i(e,n))}};return Object(q.jsxs)("div",{className:n.settingTab,children:[Object(q.jsx)(j.a,{className:n.closeBtn,onClick:t,children:Object(q.jsx)(B.a,{})}),Object(q.jsxs)(P.a,{value:g.gameMode,onChange:function(e,t){h(Object(m.a)(Object(m.a)({},g),{},{gameMode:t})),i("gameMode",t)},"aria-label":"tab",children:[Object(q.jsx)(p.a,{label:"Avalon",value:D.Avalon}),Object(q.jsx)(p.a,{label:"Quest",value:D.Quest})]}),Object(q.jsxs)(V,{value:D.Avalon,currentTab:g.gameMode,children:[Object(q.jsx)(x.a,{className:n.presetBtn,color:"default",children:Object.keys(F.presets).map((function(e){return Object(q.jsxs)(f.a,{id:e,onClick:function(){return function(e){var t=F.presets[e];h(Object(m.a)(Object(m.a)({},g),t)),o(t)}(e)},children:[" ",F.presets[e].desc]},e)}))}),Object(q.jsxs)(C.a,{className:n.selectFormControl,children:[Object(q.jsx)(y.a,{children:"\u7e3d\u4eba\u6578"}),Object(q.jsx)(S.a,{labelId:"select-total-number-of-player-label",id:"select-total-number-of-player",value:l.totalNumberOfPlayer,onChange:O,name:"avalonCharacterSetting.totalNumberOfPlayer",children:Object.keys(F.totalNumberOfPlayers).map((function(e){return Object(q.jsx)(M.a,{value:e,children:e},e)}))})]}),Object(q.jsxs)(k.a,{children:[Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.isPercivalPresent,onChange:O,name:"avalonCharacterSetting.isPercivalPresent",color:"primary"}),label:K.isPercivalPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.isMordredPresent,onChange:O,name:"avalonCharacterSetting.isMordredPresent",color:"primary"}),label:K.isMordredPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.isMorganaPresent,onChange:O,name:"avalonCharacterSetting.isMorganaPresent",color:"primary"}),label:K.isMorganaPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.isOberonPresent,onChange:O,name:"avalonCharacterSetting.isOberonPresent",color:"primary"}),label:K.isOberonPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.isLancelotPresent,onChange:O,name:"avalonCharacterSetting.isLancelotPresent",color:"primary"}),label:K.isLancelotPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:l.useLancelotAlternativeRules,onChange:O,name:"avalonCharacterSetting.useLancelotAlternativeRules",color:"primary"}),label:K.useLancelotAlternativeRules}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:g.isNewbieMode,onChange:O,name:"isNewbieMode",color:"primary"}),label:K.isNewbieMode})]})]}),Object(q.jsx)(V,{value:D.Quest,currentTab:g.gameMode,children:Object(q.jsxs)(k.a,{children:[Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isClericPresent,onChange:O,name:"questCharacterSetting.isClericPresent",color:"primary"}),label:K.isClericPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isArthurPresent,onChange:O,name:"questCharacterSetting.isArthurPresent",color:"primary"}),label:K.isArthurPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isBlindHunterPresent,onChange:O,name:"questCharacterSetting.isBlindHunterPresent",color:"primary"}),label:K.isBlindHunterPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isMorganLeFayPresent,onChange:O,name:"questCharacterSetting.isMorganLeFayPresent",color:"primary"}),label:K.isMorganLeFayPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isMutineerPresent,onChange:O,name:"questCharacterSetting.isMutineerPresent",color:"primary"}),label:K.isMutineerPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isChangelingPresent,onChange:O,name:"questCharacterSetting.isChangelingPresent",color:"primary"}),label:K.isChangelingPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isScionPresent,onChange:O,name:"questCharacterSetting.isScionPresent",color:"primary"}),label:K.isScionPresent}),Object(q.jsx)(L.a,{control:Object(q.jsx)(w.a,{checked:u.isLancelotPresent,onChange:O,name:"questCharacterSetting.isLancelotPresent",color:"primary"}),label:K.isLancelotPresent})]})}),Object(q.jsxs)("div",{className:n.sliderWrap,children:[Object(q.jsxs)(N.a,{gutterBottom:!0,children:["speaking speed :"," ",g.speakingRate]}),Object(q.jsx)(A.a,{name:"speakingRate",defaultValue:g.speakingRate,value:g.speakingRate,onChange:R("speakingRate"),valueLabelDisplay:"auto",min:.5,max:1.5,step:.05})]}),Object(q.jsxs)("div",{className:n.sliderWrap,children:[Object(q.jsxs)(N.a,{gutterBottom:!0,children:["counting speed :"," ",g.countingRate]}),Object(q.jsx)(A.a,{name:"countingRate",defaultValue:g.countingRate,value:g.countingRate,onChange:R("countingRate"),valueLabelDisplay:"auto",min:.6,max:1.6,step:.06})]})]})},G=n(142),J=n(143),$=n(74),_=n.n($),U=n(75),X=n.n(U);n(52),n(63);function Y(e){var t=window.speechSynthesis.getVoices(),n=t.filter((function(t){return e.includes(t.lang)})),a=Object(s.a)(n,1)[0];return console.debug(t),console.debug(e),console.debug(a),a}function Z(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=window.speechSynthesis,r=new SpeechSynthesisUtterance(e);r.voice=Y(F.langs),r.lang=null===(t=r.voice)||void 0===t?void 0:t.lang,r.rate=n,a.speak(r),console.log(e),console.log(r)}function ee(){window.speechSynthesis.cancel()}function te(){return/iPad|iPhone|iPod/.test(function(){var e,t,n;return(null===(e=navigator)||void 0===e||null===(t=e.userAgentData)||void 0===t?void 0:t.platform)||(null===(n=navigator)||void 0===n?void 0:n.platform)||"unknown"}())}var ne=Object(o.a)((function(e){return{mcCard:{padding:e.spacing(2),height:"100%"},playBtnWrap:{width:"100%",padding:"1em 0",textAlign:"center"}}})),ae=function(e){var t=e.gameSetting.avalonCharacterSetting.totalNumberOfPlayer,n=W(null!==t&&void 0!==t?t:H.avalonCharacterSetting.totalNumberOfPlayer),a=n.numberOfGood,r=n.numberOfEvil;return Object(q.jsxs)(I.a,{children:[Object(q.jsxs)(N.a,{variant:"subtitle1",children:["\u7e3d\u4eba\u6578:"," ",t]}),Object(q.jsxs)(N.a,{variant:"subtitle1",children:["\u597d\u4eba:"," ",a," ","\u500b"]}),Object(q.jsxs)(N.a,{variant:"subtitle1",children:["\u58de\u4eba:"," ",r," ","\u500b"]})]})},re=function(e){var t=e.playOnClick;return Object(q.jsx)("div",{onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:Object(q.jsxs)(j.a,{variant:"extended",color:"primary",children:[Object(q.jsx)(_.a,{})," ","Click to Play Script"]})})},ce=function(e){var t=e.stopPlaying;return Object(q.jsx)("div",{onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:Object(q.jsx)(j.a,{variant:"extended",color:"secondary",children:Object(q.jsx)(X.a,{})})})},ie=function(){var e=Object(a.useContext)(E).allSetting,t=e.questCharacterSetting,n=e.avalonCharacterSetting,r=e.isNewbieMode,c=Object(a.useState)([]),i=Object(s.a)(c,2),o=i[0],l=i[1],u=Object(a.useState)([]),b=Object(s.a)(u,2),j=b[0],d=b[1],g=Object(a.useState)(!1),h=Object(s.a)(g,2),O=h[0],v=h[1],P=W(n.totalNumberOfPlayer).numberOfEvil;Object(a.useEffect)((function(){var a=e.gameMode===D.Avalon?function(e){var t=e.useLancelotAlternativeRules,n=e.isLancelotPresent,a=e.isMordredPresent,r=e.isMorganaPresent,c=e.isOberonPresent,i=e.isPercivalPresent,s=e.isNewbieMode,o=e.numberOfEvil,l=o;c&&l--,n&&l--;var u=t?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u958b\u773c\u78ba\u8a8d\u8eab\u4efd":"",b=t?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u5408\u57cb\u773c":"",j="\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c";return n&&c?j="\u9664\u3010\u5967\u67cf\u502b\u540c\u58de\u862d\u65af\u6d1b\u7279\u3011\u4ee5\u5916\uff0c".concat(j,"\uff0c\u58de\u862d\u65af\u6d1b\u7279\u8c4e\u8d77\u624b\u6307\u516c"):c?j="\u9664\u5de6\u3010\u5967\u67cf\u502b\u3011\u4ee5\u5916\uff0c".concat(j):n&&(j="\u9664\u5de6\u3010\u58de\u862d\u65af\u6d1b\u7279\u3011\u4ee5\u5916\uff0c".concat(j,"\uff0c\u58de\u862d\u65af\u6d1b\u7279\u8c4e\u8d77\u624b\u6307\u516c")),s&&(j+="\uff0c\u7e3d\u5171\u6709".concat(l,"\u500b\u58de\u4eba\u958b\u773c")),[u,b,j,"\u6240\u6709\u58de\u4eba\u5408\u57cb\u773c","".concat(a?"\u9664\u5de6\u3010\u83ab\u5fb7\u96f7\u5fb7\u3011\u4ee5\u5916\uff0c":"","\u58de\u4eba\u8c4e\u8d77\u624b\u6307\u516c\u3002\u6885\u6797\u64d8\u5927\u773c").concat(s?"\uff0c\u7e3d\u5171\u6709".concat(o-a,"\u96bb\u624b\u6307\u516c"):""),"\u6885\u6797\u5408\u57cb\u773c\uff0c\u58de\u4eba\u6536\u8d77\u624b\u6307\u516c",i?"\u3010\u6885\u6797\u3011".concat(r?"\u53ca\u3010\u83ab\u7518\u5a1c\u3011":""," \u8c4e\u8d77\u624b\u6307\u516c\uff0c\u3010\u6d3e\u897f\u7dad\u723e\u3011\u64d8\u5927\u773c\u3002"):"",i?"\u3010\u6885\u6797\u3011".concat(r?"\u53ca\u3010\u83ab\u7518\u5a1c\u3011":""," \u6536\u8d77\u624b\u6307\u516c\uff0c\u3010\u6d3e\u897f\u7dad\u723e\u3011\u5408\u57cb\u773c\u3002"):"","\u6240\u6709\u4eba\u64d8\u5927\u773c"].filter((function(e){return!!e}))}(Object(m.a)(Object(m.a)({},n),{},{numberOfEvil:P,isNewbieMode:r})):function(e){var t,n=e.isClericPresent,a=e.isMutineerPresent,r=e.isBlindHunterPresent,c=e.isChangelingPresent,i=e.isArthurPresent,s=e.isMorganLeFayPresent,o=e.isScionPresent,l=e.isLancelotPresent,u=[c?"Changeling":"",r?"BlindHunter":"",o?"Scion":"",a?"Mutineer":""];return(u=u.filter((function(e){return""!==e}))).length>1?(t=u.join(",").replace(/,(?=[^,]*$)/," \u540c"),t="\u9664 ".concat(t," \u4ee5\u5916\uff0c\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c")):t=1==u.length?"\u9664 ".concat(u," \u4ee5\u5916\uff0c\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c"):"\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c",[t,"\u6240\u6709\u58de\u4eba\u5408\u57cb\u773c\u3002".concat(s&&o?"Scion \u8c4e\u8d77\u624b\u6307\u516c\u3002Morgan Le Fay\u64d8\u5927\u773c":""),"".concat(s&&o?"Scion \u6536\u8d77\u624b\u6307\u516c\u3002Morgan Le Fay \u5408\u57cb\u773c":""),"".concat(s&&i?"Morgan Le Fay \u8c4e\u8d77\u624b\u6307\u516c\u3002Arthur \u64d8\u5927\u773c":""),"".concat(s&&i?"Morgan Le Fay \u6536\u8d77\u624b\u6307\u516c\u3002Arthur \u5408\u57cb\u773c":""),"".concat(n?"First leader \u5982\u679c\u4fc2\u58de\u4eba\u5c31\u8c4e\u8d77\u624b\u6307\u516c\u3002Cleric \u64d8\u5927\u773c":""),"".concat(n?"First leader \u6536\u8d77\u624b\u6307\u516c\u3002Cleric \u5408\u57cb\u773c":""),l?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u958b\u773c\u78ba\u8a8d\u8eab\u4efd":"",l?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u5408\u57cb\u773c":"","\u6240\u6709\u4eba\u64d8\u5927\u773c"].filter((function(e){return!!e}))}(Object(m.a)({},t)),c=a.map((function(e){return[e,Object(q.jsx)("br",{})]})).reduce((function(e,t){return e.concat(t)}),[]);l(a),d(c)}),[e]);var p=Object(a.useCallback)((function(){window.speechSynthesis.getVoices().length>0&&v(!0)}),[v]);Object(a.useEffect)((function(){te()||(window.speechSynthesis.onvoiceschanged=p),p()}),[]);var x=Object(a.useCallback)((function(){ee(),o.forEach((function(t){Z("\u4e09\uff0c\u4e8c\uff0c\u4e00\uff0e",e.countingRate),Z(t,e.speakingRate)}))}),[o]);return{scriptArr:o,allSetting:e,playScript:x,scriptDisplay:j,areVoicesLoaded:O}},se=function(){var e=ne(),t=ie(),n=t.scriptDisplay,a=t.allSetting,r=t.playScript,c=t.areVoicesLoaded;return Object(q.jsxs)(G.a,{variant:"outlined",className:e.mcCard,children:[Object(q.jsx)(ae,{gameSetting:a}),Object(q.jsx)(N.a,{children:n}),Object(q.jsx)("div",{className:e.playBtnWrap,children:c?Object(q.jsx)(re,{playOnClick:r}):Object(q.jsx)(J.a,{})}),Object(q.jsx)("div",{className:e.playBtnWrap,children:Object(q.jsx)(ce,{stopPlaying:ee})})]})},oe=Object(o.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:"100vw",height:"100vh",position:"relative",boxSizing:"border-box"},fab:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},fabLeft:{position:"absolute",bottom:e.spacing(3),left:e.spacing(3)}}})),le=function(){var e=oe(),t=Object(a.useContext)(E),n=t.allSetting,r=t.editSetting,c=Object(a.useCallback)((function(){var e=n.isDarkMode;r("isDarkMode",!e)}),[n.isDarkMode,r]),i=Object(a.useMemo)((function(){return Object(l.a)(n.isDarkMode?F.theme.dark:F.theme.light)}),[n]),o=Object(a.useState)(!0),d=Object(s.a)(o,2),h=d[0],v=d[1],m=function(){v(!1)};return Object(q.jsx)(u.a,{theme:i,children:Object(q.jsxs)("div",{className:e.root,children:[Object(q.jsx)(se,{}),Object(q.jsx)(b.a,{open:h,onClose:m,fullWidth:!0,children:Object(q.jsx)(Q,{closeDialog:m})}),Object(q.jsx)(j.a,{color:"secondary","aria-label":"edit",onClick:function(){v(!0)},className:e.fab,children:Object(q.jsx)(g.a,{})}),Object(q.jsx)(j.a,{color:"secondary","aria-label":"toggle dark mode",onClick:c,className:e.fabLeft,children:Object(q.jsx)(O.a,{})})]})})};var ue=function(){return Object(q.jsx)(T,{children:Object(q.jsx)(le,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,156)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};document.documentElement.lang="zh-HK",i.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(ue,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),be()},91:function(e,t,n){},92:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.5ef7dad1.chunk.js.map