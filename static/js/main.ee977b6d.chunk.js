(this["webpackJsonpavalon-pwa"]=this["webpackJsonpavalon-pwa"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),s=n.n(c),i=(n(91),n(92),n(20)),o=n(134),l=n(78),b=n(144),u=n(150),j=n(135),d=n(76),g=n.n(d),O=n(77),h=n.n(O),m=n(36),p=n(15),P=n(147),v=n(137),x=n(138),f=n(104),y=n(139),C=n(151),M=n(145),k=n(152),S=n(140),L=n(141),w=n(149),N=n(106),A=n(153),B=n(73),R=n.n(B),F={totalNumberOfPlayers:{5:{good:3,evil:2},6:{good:4,evil:2},7:{good:4,evil:3},8:{good:5,evil:3},9:{good:6,evil:3},10:{good:6,evil:4}},label:{isPercivalPresent:"\u6d3e\u897f\u7dad\u723e",isMordredPresent:"\u83ab\u5fb7\u96f7\u5fb7",isMorganaPresent:"\u83ab\u7518\u5a1c",isOberonPresent:"\u5967\u67cf\u502b",isLancelotPresent:"\u862d\u65af\u6d1b\u7279",isClericPresent:"Cleric",isBlindHunterPresent:"BlindHunter",isMutineerPresent:"Mutineer",isArthurPresent:"Arthur",isChangelingPresent:"Changeling",isScionPresent:"Scion",isMorganLeFayPresent:"Morgan Le Fay",isNewbieMode:"\u65b0\u624b\u6a21\u5f0f",useLancelotAlternativeRules:"\u4f7f\u7528\u862d\u65af\u6d1b\u7279\u76f8\u8a8d\u898f\u5247"},langs:["zh-HK","yue_HK_#Hant"],presets:{"preset-6":{totalNumberOfPlayer:"6",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!1,isLancelotPresent:!0,desc:"\u7d93\u5178\u516d\u4eba"},"preset-7":{totalNumberOfPlayer:"7",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!0,isLancelotPresent:!0,desc:"\u7d93\u5178\u4e03\u4eba"},"preset-8":{totalNumberOfPlayer:"8",isPercivalPresent:!0,isMordredPresent:!0,isMorganaPresent:!0,isOberonPresent:!1,isLancelotPresent:!0,desc:"\u7d93\u5178\u516b\u4eba"}},theme:{light:{palette:{type:"light"}},dark:{palette:{type:"dark"}}}};Object.freeze(F);var D,H=n(4);!function(e){e.Avalon="avalon",e.Quest="quest"}(D||(D={}));var W={totalNumberOfPlayer:"5",isPercivalPresent:!1,isMordredPresent:!1,isMorganaPresent:!1,isOberonPresent:!1,isLancelotPresent:!1,useLancelotAlternativeRules:!1,speakingRate:.8,countingRate:.9,isDarkMode:!1,isNewbieMode:!1,gameMode:D.Avalon,isBlindHunterPresent:!0,isClericPresent:!0,isMutineerPresent:!1,isArthurPresent:!1,isChangelingPresent:!1,isMorganLeFayPresent:!0,isScionPresent:!1};function E(e){return{numberOfGood:F.totalNumberOfPlayers[e].good,numberOfEvil:F.totalNumberOfPlayers[e].evil}}var T=r.a.createContext({allSetting:W,editSetting:function(){},editAllCharacterSettings:function(){}}),V=function(e){var t=e.children,n=Object(a.useState)(W),r=Object(i.a)(n,2),c=r[0],s=r[1];return Object(H.jsx)(T.Provider,{value:{allSetting:c,editSetting:function(e,t){var n=Object(p.a)(Object(p.a)({},c),{},Object(m.a)({},e,t));s(n)},editAllCharacterSettings:function(e){var t=Object(p.a)(Object(p.a)({},c),e);s(t)}},children:t})},I=n(146),z=function(e){var t=e.children,n=e.value,a=e.currentTab;return Object(H.jsx)("div",{role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n),children:n===a&&Object(H.jsx)(I.a,{sx:{p:0},children:t})})},K=Object(o.a)((function(e){return{settingTab:{backgroundColor:e.palette.background.paper,width:"70%",height:"80%",padding:"3em 1.5em 5em",minWidth:320},selectFormControl:{margin:"".concat(e.spacing(1),"px 0"),minWidth:"10em"},sliderWrap:{maxWidth:"55vw"},closeBtn:{position:"absolute",top:e.spacing(3),right:e.spacing(3),cursor:"pointer",zIndex:10},presetBtn:{margin:"".concat(e.spacing(2),"px 0")}}})),Q=F.label,G=function(e){var t=e.closeDialog,n=K(),r=Object(a.useContext)(T),c=r.allSetting,s=r.editSetting,o=r.editAllCharacterSettings,l=Object(a.useState)(null!==c&&void 0!==c?c:W),b=Object(i.a)(l,2),u=b[0],d=b[1],g=function(e){var t=e.target.name,n=e.target.value,a=e.target.checked,r=void 0===a?n:a;d(Object(p.a)(Object(p.a)({},u),{},Object(m.a)({},t,r))),s(t,r)},O=function(e){return function(t,n){Array.isArray(n)||(d(Object(p.a)(Object(p.a)({},u),{},Object(m.a)({},e,n))),s(e,n))}};return Object(H.jsxs)("div",{className:n.settingTab,children:[Object(H.jsx)(j.a,{className:n.closeBtn,onClick:t,children:Object(H.jsx)(R.a,{})}),Object(H.jsxs)(P.a,{value:u.gameMode,onChange:function(e,t){d(Object(p.a)(Object(p.a)({},u),{},{gameMode:t})),s("gameMode",t)},"aria-label":"tab",children:[Object(H.jsx)(v.a,{label:"Avalon",value:D.Avalon}),Object(H.jsx)(v.a,{label:"Quest",value:D.Quest})]}),Object(H.jsxs)(z,{value:D.Avalon,currentTab:u.gameMode,children:[Object(H.jsx)(x.a,{className:n.presetBtn,color:"default",children:Object.keys(F.presets).map((function(e){return Object(H.jsxs)(f.a,{id:e,onClick:function(){return function(e){var t=F.presets[e];d(Object(p.a)(Object(p.a)({},u),t)),o(t)}(e)},children:[" ",F.presets[e].desc]},e)}))}),Object(H.jsxs)(y.a,{className:n.selectFormControl,children:[Object(H.jsx)(C.a,{children:"\u7e3d\u4eba\u6578"}),Object(H.jsx)(M.a,{labelId:"select-total-number-of-player-label",id:"select-total-number-of-player",value:u.totalNumberOfPlayer,onChange:g,name:"totalNumberOfPlayer",children:Object.keys(F.totalNumberOfPlayers).map((function(e){return Object(H.jsx)(k.a,{value:e,children:e},e)}))})]}),Object(H.jsxs)(S.a,{children:[Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isPercivalPresent,onChange:g,name:"isPercivalPresent",color:"primary"}),label:Q.isPercivalPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isMordredPresent,onChange:g,name:"isMordredPresent",color:"primary"}),label:Q.isMordredPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isMorganaPresent,onChange:g,name:"isMorganaPresent",color:"primary"}),label:Q.isMorganaPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isOberonPresent,onChange:g,name:"isOberonPresent",color:"primary"}),label:Q.isOberonPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isLancelotPresent,onChange:g,name:"isLancelotPresent",color:"primary"}),label:Q.isLancelotPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.useLancelotAlternativeRules,onChange:g,name:"useLancelotAlternativeRules",color:"primary"}),label:Q.useLancelotAlternativeRules}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isNewbieMode,onChange:g,name:"isNewbieMode",color:"primary"}),label:Q.isNewbieMode})]})]}),Object(H.jsx)(z,{value:D.Quest,currentTab:u.gameMode,children:Object(H.jsxs)(S.a,{children:[Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isClericPresent,onChange:g,name:"isClericPresent",color:"primary"}),label:Q.isClericPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isArthurPresent,onChange:g,name:"isArthurPresent",color:"primary"}),label:Q.isArthurPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isBlindHunterPresent,onChange:g,name:"isBlindHunterPresent",color:"primary"}),label:Q.isBlindHunterPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isMorganLeFayPresent,onChange:g,name:"isMorganLeFayPresent",color:"primary"}),label:Q.isMorganLeFayPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isMutineerPresent,onChange:g,name:"isMutineerPresent",color:"primary"}),label:Q.isMutineerPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isChangelingPresent,onChange:g,name:"isChangelingPresent",color:"primary"}),label:Q.isChangelingPresent}),Object(H.jsx)(L.a,{control:Object(H.jsx)(w.a,{checked:u.isScionPresent,onChange:g,name:"isScionPresent",color:"primary"}),label:Q.isScionPresent})]})}),Object(H.jsxs)("div",{className:n.sliderWrap,children:[Object(H.jsxs)(N.a,{gutterBottom:!0,children:["speaking speed :"," ",u.speakingRate]}),Object(H.jsx)(A.a,{name:"speakingRate",defaultValue:u.speakingRate,value:u.speakingRate,onChange:O("speakingRate"),valueLabelDisplay:"auto",min:.5,max:1.5,step:.05})]}),Object(H.jsxs)("div",{className:n.sliderWrap,children:[Object(H.jsxs)(N.a,{gutterBottom:!0,children:["counting speed :"," ",u.countingRate]}),Object(H.jsx)(A.a,{name:"countingRate",defaultValue:u.countingRate,value:u.countingRate,onChange:O("countingRate"),valueLabelDisplay:"auto",min:.6,max:1.6,step:.06})]})]})},J=n(142),$=n(143),_=n(74),q=n.n(_),U=n(75),X=n.n(U);n(52),n(63);function Y(e){var t=window.speechSynthesis.getVoices(),n=t.filter((function(t){return e.includes(t.lang)})),a=Object(i.a)(n,1)[0];return console.debug(t),console.debug(e),console.debug(a),a}function Z(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=window.speechSynthesis,r=new SpeechSynthesisUtterance(e);r.voice=Y(F.langs),r.lang=null===(t=r.voice)||void 0===t?void 0:t.lang,r.rate=n,a.speak(r),console.log(e),console.log(r)}function ee(){window.speechSynthesis.cancel()}var te=Object(o.a)((function(e){return{mcCard:{padding:e.spacing(2),height:"100%"},playBtnWrap:{width:"100%",padding:"1em 0",textAlign:"center"}}})),ne=function(e){var t=e.gameSetting.totalNumberOfPlayer,n=E(null!==t&&void 0!==t?t:W.totalNumberOfPlayer),a=n.numberOfGood,r=n.numberOfEvil;return Object(H.jsxs)(I.a,{children:[Object(H.jsxs)(N.a,{variant:"subtitle1",children:["\u7e3d\u4eba\u6578:"," ",t]}),Object(H.jsxs)(N.a,{variant:"subtitle1",children:["\u597d\u4eba:"," ",a," ","\u500b"]}),Object(H.jsxs)(N.a,{variant:"subtitle1",children:["\u58de\u4eba:"," ",r," ","\u500b"]})]})},ae=function(e){var t=e.playOnClick;return Object(H.jsx)("div",{onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:Object(H.jsxs)(j.a,{variant:"extended",color:"primary",children:[Object(H.jsx)(q.a,{})," ","Click to Play Script"]})})},re=function(e){var t=e.stopPlaying;return Object(H.jsx)("div",{onClick:t,role:"button",tabIndex:0,onKeyDown:t,children:Object(H.jsx)(j.a,{variant:"extended",color:"secondary",children:Object(H.jsx)(X.a,{})})})},ce=function(){var e=Object(a.useContext)(T).allSetting,t=Object(a.useState)([]),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),o=Object(i.a)(s,2),l=o[0],b=o[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),d=j[0],g=j[1],O=E(e.totalNumberOfPlayer).numberOfEvil;Object(a.useEffect)((function(){var t=e.gameMode===D.Avalon?function(e){var t=e.useLancelotAlternativeRules,n=e.isLancelotPresent,a=e.isMordredPresent,r=e.isMorganaPresent,c=e.isOberonPresent,s=e.isPercivalPresent,i=e.isNewbieMode,o=e.numberOfEvil,l=o;c&&l--,n&&l--;var b=t?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u958b\u773c\u78ba\u8a8d\u8eab\u4efd":"",u=t?"\u5169\u500b\u862d\u65af\u6d1b\u7279\u5408\u57cb\u773c":"",j="\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c";return n&&c?j="\u9664\u3010\u5967\u67cf\u502b\u540c\u58de\u862d\u65af\u6d1b\u7279\u3011\u4ee5\u5916\uff0c".concat(j,"\uff0c\u58de\u862d\u65af\u6d1b\u7279\u8c4e\u8d77\u624b\u6307\u516c"):c?j="\u9664\u5de6\u3010\u5967\u67cf\u502b\u3011\u4ee5\u5916\uff0c".concat(j):n&&(j="\u9664\u5de6\u3010\u58de\u862d\u65af\u6d1b\u7279\u3011\u4ee5\u5916\uff0c".concat(j,"\uff0c\u58de\u862d\u65af\u6d1b\u7279\u8c4e\u8d77\u624b\u6307\u516c")),i&&(j+="\uff0c\u7e3d\u5171\u6709".concat(l,"\u500b\u58de\u4eba\u958b\u773c")),[b,u,j,"\u6240\u6709\u58de\u4eba\u5408\u57cb\u773c","".concat(a?"\u9664\u5de6\u3010\u83ab\u5fb7\u96f7\u5fb7\u3011\u4ee5\u5916\uff0c":"","\u58de\u4eba\u8c4e\u8d77\u624b\u6307\u516c\u3002\u6885\u6797\u64d8\u5927\u773c").concat(i?"\uff0c\u7e3d\u5171\u6709".concat(o,"\u96bb\u624b\u6307\u516c"):""),"\u6885\u6797\u5408\u57cb\u773c\uff0c\u58de\u4eba\u6536\u8d77\u624b\u6307\u516c",s?"\u3010\u6885\u6797\u3011".concat(r?"\u53ca\u3010\u83ab\u7518\u5a1c\u3011":""," \u8c4e\u8d77\u624b\u6307\u516c\uff0c\u3010\u6d3e\u897f\u7dad\u723e\u3011\u64d8\u5927\u773c\u3002"):"",s?"\u3010\u6885\u6797\u3011".concat(r?"\u53ca\u3010\u83ab\u7518\u5a1c\u3011":""," \u6536\u8d77\u624b\u6307\u516c\uff0c\u3010\u6d3e\u897f\u7dad\u723e\u3011\u5408\u57cb\u773c\u3002"):"","\u6240\u6709\u4eba\u64d8\u5927\u773c"].filter((function(e){return!!e}))}(Object(p.a)(Object(p.a)({},e),{},{numberOfEvil:O})):function(e){var t,n=e.isClericPresent,a=e.isMutineerPresent,r=e.isBlindHunterPresent,c=e.isChangelingPresent,s=e.isArthurPresent,i=e.isMorganLeFayPresent,o=e.isScionPresent,l=[c?"Changeling":"",r?"BlindHunter":"",o?"Scion":"",a?"Mutineer":""];return(l=l.filter((function(e){return""!==e}))).length>1?(t=l.join(",").replace(/,(?=[^,]*$)/," \u540c"),t="\u9664 ".concat(t," \u4ee5\u5916\uff0c\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c")):t=1==l.length?"\u9664 ".concat(l," \u4ee5\u5916\uff0c\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c"):"\u6240\u6709\u58de\u4eba\u64d8\u5927\u773c",[t,"\u6240\u6709\u58de\u4eba\u5408\u57cb\u773c\u3002".concat(i&&o?"Scion \u8c4e\u8d77\u624b\u6307\u516c\u3002Morgan Le Fay\u64d8\u5927\u773c":""),"".concat(i&&o?"Scion \u6536\u8d77\u624b\u6307\u516c\u3002Morgan Le Fay \u5408\u57cb\u773c":""),"".concat(i&&s?"Morgan Le Fay \u8c4e\u8d77\u624b\u6307\u516c\u3002Arthur \u64d8\u5927\u773c":""),"".concat(i&&s?"Morgan Le Fay \u6536\u8d77\u624b\u6307\u516c\u3002Arthur \u5408\u57cb\u773c":""),"".concat(n?"First leader \u5982\u679c\u4fc2\u58de\u4eba\u5c31\u8c4e\u8d77\u624b\u6307\u516c\u3002Cleric \u64d8\u5927\u773c":""),"".concat(n?"First leader \u6536\u8d77\u624b\u6307\u516c\u3002Cleric \u5408\u57cb\u773c":"")].filter((function(e){return!!e}))}(Object(p.a)({},e)),n=t.map((function(e){return[e,Object(H.jsx)("br",{})]})).reduce((function(e,t){return e.concat(t)}),[]);c(t),b(n)}),[e]),Object(a.useEffect)((function(){var e=window.speechSynthesis;e.getVoices(),e.onvoiceschanged=function(){e.getVoices().length>0&&g(!0)}}),[]);var h=Object(a.useCallback)((function(){ee(),r.forEach((function(t){Z("\u4e09\uff0c\u4e8c\uff0c\u4e00\uff0e",e.countingRate),Z(t,e.speakingRate)}))}),[r]);return{scriptArr:r,allSetting:e,playScript:h,scriptDisplay:l,areVoicesLoaded:d}},se=function(){var e=te(),t=ce(),n=t.scriptDisplay,a=t.allSetting,r=t.playScript,c=t.areVoicesLoaded;return Object(H.jsxs)(J.a,{variant:"outlined",className:e.mcCard,children:[Object(H.jsx)(ne,{gameSetting:a}),Object(H.jsx)(N.a,{children:n}),Object(H.jsx)("div",{className:e.playBtnWrap,children:c?Object(H.jsx)(ae,{playOnClick:r}):Object(H.jsx)($.a,{})}),Object(H.jsx)("div",{className:e.playBtnWrap,children:Object(H.jsx)(re,{stopPlaying:ee})})]})},ie=Object(o.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,width:"100vw",height:"100vh",position:"relative",boxSizing:"border-box"},fab:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},fabLeft:{position:"absolute",bottom:e.spacing(3),left:e.spacing(3)}}})),oe=function(){var e=ie(),t=Object(a.useContext)(T),n=t.allSetting,r=t.editSetting,c=Object(a.useCallback)((function(){var e=n.isDarkMode;r("isDarkMode",!e)}),[n.isDarkMode,r]),s=Object(a.useMemo)((function(){return Object(l.a)(n.isDarkMode?F.theme.dark:F.theme.light)}),[n]),o=Object(a.useState)(!0),d=Object(i.a)(o,2),O=d[0],m=d[1],p=function(){m(!1)};return Object(H.jsx)(b.a,{theme:s,children:Object(H.jsxs)("div",{className:e.root,children:[Object(H.jsx)(se,{}),Object(H.jsx)(u.a,{open:O,onClose:p,fullWidth:!0,children:Object(H.jsx)(G,{closeDialog:p})}),Object(H.jsx)(j.a,{color:"secondary","aria-label":"edit",onClick:function(){m(!0)},className:e.fab,children:Object(H.jsx)(g.a,{})}),Object(H.jsx)(j.a,{color:"secondary","aria-label":"toggle dark mode",onClick:c,className:e.fabLeft,children:Object(H.jsx)(h.a,{})})]})})};var le=function(){return Object(H.jsx)(V,{children:Object(H.jsx)(oe,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var be=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,156)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};document.documentElement.lang="zh-HK",s.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(le,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),be()},91:function(e,t,n){},92:function(e,t,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.ee977b6d.chunk.js.map